<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="phaser.min.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        var game = new Phaser.Game(600, 600, Phaser.AUTO, '', { preload: preload, create: create });

        function preload () {
            //TODO remove/replace logo
            game.load.image('logo', 'phaser.png');

            //load spritesheet!! (TODO: switch images to use spritesheet)
            game.load.spritesheet('tile', 'img/sprites.png', 200, 200);

            //set blank tiles (TODO: set to actual blank tile)
            game.load.image('blank', 'img/jake_tile.png');

            //initially set p1_avatar to jake_tile
            game.load.image('p1_avatar', 'img/bmo_tile.png');

            game.load.image('p2_avatar', 'img/finn_tile.png');

        }

        //initialize vars here
        var tileSide = 200;

        //tile spritesheet order (0-5): pb, marcy, lsp, jake, finn, bmo
        var blank = 3;  //jake
        var player1 = 5;
        var player2;


        function create () {

            // var logo = game.add.sprite(game.world.centerX, game.world.centerY, 'logo');
            // logo.anchor.setTo(0.5, 0.5);

            var tilePositions = [[0,0], [0,1], [0,2], [1,0], [1,1], [1,2], [2,0], [2,1], [2,2]];
            var tiles = [];

            for (var i = 0; i < 10; i++) {
                tilePosX = tilePositions[i][0]*200;
                tilePosY = tilePositions[i][1]*200;

                tiles[i] = game.add.sprite(tilePosX,tilePosY,'tile',blank);
                tiles[i].width = tileSide;
                tiles[i].height = tileSide;
                tiles[i].frameName = "tile-" + tilePosX.toString() + "-" + tilePosY.toString();

                // This shitz be important.
                tiles[i].inputEnabled = true;
                tiles[i].events.onInputDown.add(actionOnClick,this);
            }


        }

        function actionOnClick (currTile) {
            if (currTile.frame === blank) {
              currTile.frame = player1;
            } else {
              currTile.frame = blank;
            }

            //var tileSprite = game.add.sprite(currTile.x,currTile.y,tile);
            //tileSprite.width = tileSide;
            //tileSprite.height = tileSide;

        }

    };

    </script>

    </body>
</html>