<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="phaser.min.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {



        var game = new Phaser.Game(600, 600, Phaser.AUTO, '', { preload: preload, create: create });

        function preload () {
            //TODO remove/replace logo
            game.load.image('logo', 'phaser.png');

            //load spritesheet!!
            game.load.spritesheet('tiles', 'img/tiles.png', 200, 200);

        }

        //initialize vars here
        var tileSide = 200;

        //tile spritesheet order (0-5): pb, marcy, lsp, jake, finn, bmo
        var blank = 6;      //gunter
        var player1 = 3;    //jake
        var player2 = 5;    //bmo

        //TODO: check if I want this as global var
        var tiles = [];

        var style = { font: "40px Arial", fill: "#ff0044", align: "center" };
        var winner = '';
        var turn;

        function create () {

            // var logo = game.add.sprite(game.world.centerX, game.world.centerY, 'logo');
            // logo.anchor.setTo(0.5, 0.5);

            var tilePositions = [[0,0], [0,1], [0,2], [1,0], [1,1], [1,2], [2,0], [2,1], [2,2]];

            for (var i = 0; i < 10; i++) {
                tilePosX = tilePositions[i][0]*200;
                tilePosY = tilePositions[i][1]*200;
                tilePositions[i][2] = '';

                tiles[i] = game.add.sprite(tilePosX,tilePosY,'tiles',blank);
                tiles[i].width = tileSide;
                tiles[i].height = tileSide;

                // //TODO check if this is necessary
                // tiles[i].frameName = "tile-" + tilePosX.toString() + "-" + tilePosY.toString();

                // This shitz be important. TODO: check if this is ok in create, or if we need to pause actionOnClick during computer/player2 turn
                tiles[i].inputEnabled = true;
                tiles[i].events.onInputDown.add(actionOnClick,this);

                turn = 'player1';
                if (turn === 'player1') {
                    game.add.text(game.world.centerX, 0, 'Player1 Turn', style);
                } else {
                    game.add.text(game.world.centerX, 0, 'Player2 Turn', style);
                }

            }

        }


        function update () {


        }

        function actionOnClick (currTile) {
            if (currTile.frame === blank) {
                currTile.frame = player1;
                turn = 'player2';
                // //RANDOM TILE
                // currTile.frame = Math.floor(Math.random()*6);
            } else {
              currTile.frame = blank;
            }

        }

        function computerPlay (tile) {
            //checks if tile is empty or not
        }

    };

    </script>

    </body>
</html>